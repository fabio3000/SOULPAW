<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <title>SOULPAW | The Invisible Bond</title>
    <meta name="description" content="Verwandle das Bellen deines Hundes in Kunst oder entdecke eure astrologische Seelenverbindung. Handgefertigte Unikate für Hundeliebhaber.">
    
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Montserrat:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <style>
        /* --- THEMES --- */
        :root {
            --bg-color: #0a0a0a;
            --text-color: #f0f0f0;
            --accent-color: #9b59b6; /* Sound: Mystisches Lila */
            --accent-glow: rgba(155, 89, 182, 0.4);
            --secondary-bg: #111;
            --card-bg: rgba(255,255,255,0.05);
            --glass-bg: rgba(20, 20, 20, 0.8);
            --btn-text: #fff;
            
            /* Shop Colors */
            --shop-bg-gradient: linear-gradient(135deg, #1a0520 0%, #000 100%);
            --shop-icon-color: #9b59b6;
            --shop-text-color: #fff;
        }

        body.astro-mode {
            --bg-color: #fffbf5; /* Astro: Warmes Creme */
            --text-color: #2c3e50;
            --accent-color: #c5a059; /* Astro: Gold */
            --accent-glow: rgba(197, 160, 89, 0.4);
            --secondary-bg: #f9f7f2;
            --card-bg: #fff;
            --glass-bg: rgba(255, 255, 255, 0.85);

            --shop-bg-gradient: linear-gradient(135deg, #fdfbf7 0%, #fff 100%);
            --shop-icon-color: #c5a059;
            --shop-text-color: #333;
        }

        /* --- BASIS --- */
        html { scroll-behavior: smooth; }
        * { margin: 0; padding: 0; box-sizing: border-box; transition: background 0.5s ease, color 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease; }
        
        body {
            font-family: 'Montserrat', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            overflow-x: hidden;
            line-height: 1.6;
        }
        body.modal-open { overflow: hidden; }

        h1, h2, h3 { font-family: 'Cinzel', serif; letter-spacing: 1px; }

        /* --- HEADER --- */
        .header-bar {
            position: fixed; top: 0; left: 0; width: 100%;
            padding: 15px 5%; display: flex; justify-content: space-between; align-items: center;
            z-index: 1000; background: transparent; transition: 0.3s;
        }
        .header-bar.scrolled {
            background: var(--glass-bg); backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(128,128,128,0.1);
        }
        .brand { font-family: 'Cinzel', serif; font-size: 1.4rem; font-weight: 700; letter-spacing: 2px; }
        
        .mode-switch-container { 
            background: rgba(128,128,128,0.1); backdrop-filter: blur(5px);
            padding: 4px; border-radius: 30px; border: 1px solid rgba(128,128,128,0.2); 
            display: flex; gap: 5px;
        }
        .switch-btn { 
            padding: 6px 12px; border-radius: 20px; border: none; cursor: pointer; 
            font-size: 0.7rem; font-weight: 700; background: transparent; color: inherit; opacity: 0.6;
        }
        .switch-btn.active { background: var(--accent-color); color: var(--btn-text); opacity: 1; }

        /* --- MODAL --- */
        .welcome-modal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.95); backdrop-filter: blur(15px);
            z-index: 9999; display: none; align-items: center; justify-content: center;
            animation: fadeIn 0.5s; padding: 1rem;
        }
        .modal-content-wrapper {
            max-width: 1100px; width: 100%; background: #111;
            border-radius: 20px; overflow: hidden; box-shadow: 0 20px 60px rgba(0,0,0,0.6);
            border: 1px solid #333; display: flex; flex-direction: column;
        }
        .modal-header { padding: 2rem; text-align: center; border-bottom: 1px solid #333; }
        .modal-header h2 { font-size: 1.8rem; color: #fff; margin-bottom: 0.5rem; }
        .modal-header p { font-size: 1rem; color: #888; }
        
        .modal-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; }
        
        .modal-choice { 
            padding: 3rem 2rem; text-align: center; cursor: pointer; transition: 0.3s; 
            border-right: 1px solid rgba(255,255,255,0.05); position: relative; z-index: 1;
        }
        .modal-choice:last-child { border-right: none; }
        .modal-choice:hover { filter: brightness(1.2); z-index: 2;}
        
        .choice-sound { background: #1a0520; color: #fff; }
        .choice-astro { background: #fffbf5; color: #2c3e50; }
        .choice-special { background: #080808; color: #C5A059; overflow: hidden; cursor: default; }

        .modal-button-fake {
            display: inline-block; padding: 10px 25px; border-radius: 30px;
            font-weight: 700; font-size: 0.8rem; color: #fff; 
            text-transform: uppercase; margin-top: 20px;
        }

        .realistic-sparkle {
            position: absolute; background: white; width: 1px; height: 1px; border-radius: 50%;
            box-shadow: 0 0 2px 1px #fff, 0 0 6px 2px #fdfbd3, 0 0 12px 4px #c5a059;
            opacity: 0; pointer-events: none; z-index: 1; animation: realisticTwinkle infinite ease-in-out;
        }
        @keyframes realisticTwinkle { 0% { opacity: 0; transform: scale(0.1); } 50% { opacity: 1; transform: scale(1); } 100% { opacity: 0; transform: scale(0.1); } }

        @media (max-width: 900px) { 
            .modal-grid { grid-template-columns: 1fr; } 
            .modal-content-wrapper { max-height: 85vh; overflow-y: auto; } 
            .modal-choice {
                padding: 1.5rem; display: flex; flex-direction: row; align-items: center; gap: 20px;
                text-align: left; border-right: none; border-bottom: 1px solid rgba(255,255,255,0.1);
            }
            .modal-choice i { font-size: 2rem !important; margin-bottom: 0 !important; width: 40px; text-align: center;}
            .modal-choice h2 { font-size: 1.1rem !important; margin-bottom: 0 !important; }
            .modal-choice p { font-size: 0.8rem !important; margin-bottom: 0 !important; opacity: 0.7; }
            .modal-button-fake { display: none; }
            .modal-text-wrap { flex: 1; z-index: 10; position: relative;}
        }

        /* --- HERO --- */
        .hero { min-height: 90vh; display: flex; align-items: center; justify-content: center; text-align: center; position: relative; padding: 6rem 20px 2rem; }
        .hero-bg-sound, .hero-bg-astro { position: absolute; top:0; left:0; width:100%; height:100%; z-index: -1; opacity: 0; transition: opacity 0.8s; }
        .hero-bg-sound { background: radial-gradient(circle at center, #1a1a1a 0%, #000 100%); opacity: 1; }
        body.astro-mode .hero-bg-sound { opacity: 0; }
        body.astro-mode .hero-bg-astro { background: radial-gradient(circle at center, #fff 0%, #f3f0ff 100%); opacity: 1; }
        .hero-content { max-width: 700px; position: relative; z-index: 10; }
        .hero h1 { font-size: 3rem; margin-bottom: 1rem; line-height: 1.2; text-shadow: 0 0 20px var(--bg-color); }
        
        .cta-btn {
            padding: 15px 40px; background: var(--accent-color); color: var(--btn-text); border: none; border-radius: 50px; font-weight: 600; text-transform: uppercase; font-size: 0.9rem; cursor: pointer; text-decoration: none; display: inline-block; margin-top: 20px; box-shadow: 0 5px 20px var(--accent-glow); transition: 0.3s; letter-spacing: 1px;
            animation: pulseBtn 3s infinite;
        }
        @keyframes pulseBtn { 0% { transform: scale(1); } 50% { transform: scale(1.03); box-shadow: 0 10px 30px var(--accent-glow); } 100% { transform: scale(1); } }
        .cta-btn:hover { animation: none; transform: translateY(-2px); box-shadow: 0 10px 30px var(--accent-glow); }
        .cta-btn:disabled { background: #ccc; cursor: not-allowed; animation: none; box-shadow: none; }

        /* --- SECTIONS --- */
        .content-section, .faq-section, #order, .testimonials-section, .newsletter-section, footer { opacity: 0; transform: translateY(30px); transition: opacity 0.8s ease-out, transform 0.8s ease-out; }
        .is-visible { opacity: 1 !important; transform: translateY(0) !important; }
        .content-section { display: none; padding: 4rem 5%; }
        .content-section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        /* --- VISUALS --- */
        .visual-container-common {
            height: 250px; display: flex; align-items: center; justify-content: center;
            background: #000; border-radius: 12px; overflow: hidden; border: 1px solid #333;
            position: relative; 
        }
        .paw-start { position: absolute; left: 10%; color: var(--accent-color); font-size: 1.2rem; z-index: 2; opacity: 0.9; transform: rotate(-10deg); transition: 0.1s; }
        .waveform-svg { width: 100%; height: 100%; margin-left: 5px; }
        .waveform-path {
            fill: none; stroke: var(--accent-color); stroke-width: 1.5px;
            stroke-linecap: round; stroke-linejoin: round; vector-effect: non-scaling-stroke;
            animation: barkAnimation 2s infinite ease-in-out;
        }
        @keyframes barkAnimation {
            0%, 100% { d: path("M0,50 L20,50 L25,50 L30,50 L35,50 L40,50 L45,50 L50,50 L55,50 L60,50 L65,50 L70,50 L100,50"); }
            50% { d: path("M0,50 L20,50 L25,20 L30,80 L35,10 L40,90 L45,30 L50,70 L55,40 L60,60 L65,50 L70,50 L100,50"); }
        }
        
        .visual-astro { background: #fdfbf7; border: 1px solid var(--accent-color); }
        .star { position: absolute; color: var(--accent-color); font-size: 10px; }
        .dynamic-img { width: 100%; height: 100%; object-fit: cover; display: none; }
        .default-visual { width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; position: relative; }

        /* --- ASTRO TEST --- */
        .astro-test {
            background: var(--secondary-bg); padding: 2.5rem; border-radius: 20px;
            margin: 3rem auto; text-align: center; border: 1px solid var(--accent-color);
            max-width: 600px; box-shadow: 0 10px 40px rgba(0,0,0,0.05);
        }
        .input-wrapper { display: flex; gap: 20px; justify-content: center; margin: 30px 0; flex-wrap: wrap; }
        .date-field { flex: 1; min-width: 220px; }
        .date-field label { display: block; font-size: 0.9rem; margin-bottom: 8px; font-weight: 600; color: var(--accent-color); text-transform: uppercase; letter-spacing: 1px;}
        input[type="date"] { padding: 12px; border-radius: 8px; border: 1px solid #ddd; width: 100%; font-size: 1rem; background: white; color: #333; font-family: 'Montserrat', sans-serif; cursor: pointer; }
        
        .aura-toggle-container { margin: 25px 0 15px 0; display: flex; justify-content: center; align-items: center; gap: 10px; cursor: pointer; }
        .aura-checkbox { accent-color: var(--accent-color); transform: scale(1.2); cursor: pointer; }
        
        .photo-upload-box {
            margin: 20px auto; width: 100%; max-width: 300px;
            border: 2px dashed var(--accent-color); border-radius: 15px;
            padding: 20px; cursor: pointer; transition: 0.3s; background: rgba(255,255,255,0.05);
        }
        .photo-upload-box:hover { background: rgba(255,255,255,0.1); }
        
        .aura-display {
            position: relative; width: 250px; height: 250px; margin: 20px auto;
            border-radius: 50%; overflow: hidden; display: none;
            box-shadow: 0 0 30px rgba(0,0,0,0.2); border: 4px solid var(--accent-color);
        }
        .aura-display img { width: 100%; height: 100%; object-fit: cover; }
        .aura-overlay { position: absolute; inset: 0; mix-blend-mode: hard-light; opacity: 0.6; animation: rotateAura 10s infinite linear; }
        @keyframes rotateAura { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        
        /* NEW LOADER */
        #calc-loader { display: none; margin-top: 30px; text-align: center; }
        .loader-bar-bg { width: 100%; height: 4px; background: rgba(255,255,255,0.1); border-radius: 2px; margin-top: 10px; overflow: hidden; }
        body.astro-mode .loader-bar-bg { background: rgba(0,0,0,0.1); }
        .loader-bar-fill { width: 0%; height: 100%; background: var(--accent-color); transition: width 0.1s linear; }
        .loader-text { font-family: monospace; font-size: 0.8rem; color: var(--accent-color); margin-bottom: 5px; }

        #karma-result { display: none; margin-top: 30px; }
        .blurred-text { filter: blur(4px); user-select: none; opacity: 0.6; margin: 15px 0; font-family: 'Times New Roman', serif; font-style: italic; background: linear-gradient(to bottom, transparent, var(--bg-color)); }
        .teaser-box { border: 1px dashed var(--accent-color); padding: 20px; margin-top: -30px; position: relative; z-index: 2; background: rgba(255,255,255,0.95); border-radius: 10px; }
        body:not(.astro-mode) .teaser-box { background: rgba(20,20,20,0.95); }

        /* --- SHOWCASE --- */
        .showcase { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem; margin-top: 3rem; }
        .card { 
            background: var(--card-bg); padding: 2rem; border-radius: 15px; 
            text-align: center; border: 1px solid rgba(255,255,255,0.1); 
            transition: transform 0.4s ease, box-shadow 0.4s ease;
        }
        .card:hover { transform: translateY(-5px); box-shadow: 0 15px 40px rgba(0,0,0,0.2); }
        body.astro-mode .card { border: 1px solid rgba(0,0,0,0.08); box-shadow: 0 5px 20px rgba(0,0,0,0.03); }
        .card h3 { margin: 1.5rem 0 0.5rem; color: var(--accent-color); font-size: 1.2rem; }
        .highlight-product { border: 2px solid var(--accent-color) !important; box-shadow: 0 0 30px rgba(197, 160, 89, 0.3) !important; transform: scale(1.02); }

        /* --- TESTIMONIALS (MARQUEE) --- */
        .testimonials-section { padding: 4rem 0; background: var(--secondary-bg); overflow: hidden; border-top: 1px solid rgba(255,255,255,0.05); }
        .marquee-container { display: flex; width: 100%; overflow: hidden; mask-image: linear-gradient(to right, transparent, black 10%, black 90%, transparent); }
        .marquee-track { display: flex; gap: 2rem; animation: scroll 40s linear infinite; padding: 20px 0; white-space: nowrap; }
        .testi-card { background: var(--card-bg); padding: 1.5rem; border-radius: 15px; min-width: 300px; border: 1px solid rgba(255,255,255,0.1); }
        body.astro-mode .testi-card { border: 1px solid rgba(0,0,0,0.1); box-shadow: 0 5px 15px rgba(0,0,0,0.05); }
        .stars { color: #f1c40f; margin-bottom: 10px; font-size: 0.9rem; }
        .testi-text { font-style: italic; font-size: 0.9rem; opacity: 0.8; margin-bottom: 15px; white-space: normal; }
        .testi-name { font-weight: 700; font-size: 0.85rem; color: var(--accent-color); }
        @keyframes scroll { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }
        #reviews-sound, #reviews-astro { display: none; }

        /* --- NEWSLETTER --- */
        .newsletter-section { padding: 4rem 5%; text-align: center; }
        .newsletter-box { max-width: 500px; margin: 0 auto; }
        .nl-input { padding: 15px; border-radius: 30px; border: 1px solid rgba(255,255,255,0.2); background: transparent; color: inherit; width: 70%; margin-right: -40px; }
        .nl-btn { padding: 15px 25px; border-radius: 30px; border: none; background: var(--accent-color); color: white; cursor: pointer; }

        /* --- FAQ --- */
        .faq-section { padding: 4rem 5%; max-width: 800px; margin: 0 auto; }
        details { background: var(--card-bg); border: 1px solid rgba(255,255,255,0.1); border-radius: 10px; margin-bottom: 10px; }
        body.astro-mode details { border-color: rgba(0,0,0,0.1); }
        summary { padding: 1.2rem; cursor: pointer; font-weight: 700; display: flex; justify-content: space-between; }
        #faq-astro, #faq-sound { display: none; }
        
        /* --- SHOP --- */
        #order { text-align: center; padding: 5rem 5%; background: var(--secondary-bg); }
        #form-container { width:100%; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:center; background: var(--shop-bg-gradient); color: var(--shop-text-color); padding: 20px; }
        .steps-list { text-align: left; margin: 2rem auto; max-width: 500px; list-style: none; }
        .steps-list li { margin-bottom: 15px; display: flex; gap: 10px; }
        .steps-list i { color: var(--accent-color); margin-top: 5px; }

        footer { text-align: center; padding: 4rem 5% 2rem; border-top: 1px solid rgba(255,255,255,0.1); opacity: 0.8; font-size: 0.8rem; background: var(--bg-color);}
        body.astro-mode footer { border-top: 1px solid rgba(0,0,0,0.1); }
        .trust-badges { display: flex; justify-content: center; gap: 20px; margin-bottom: 20px; color: var(--accent-color); font-size: 1.2rem; }
        .footer-links a { color: inherit; margin: 0 10px; text-decoration: none; opacity: 0.6; transition: 0.3s; }
        .footer-links a:hover { opacity: 1; color: var(--accent-color); }

        .stardust { position: fixed; width: 4px; height: 4px; background-color: var(--accent-color); border-radius: 50%; pointer-events: none; z-index: 9999; opacity: 1; animation: fadeOut 0.8s forwards; }
        @keyframes fadeOut { to { opacity: 0; transform: translate(-50%, -50%) scale(0.3); } }
    </style>
</head>
<body>

    <div class="welcome-modal" id="welcome-modal">
        <div class="modal-content-wrapper">
            <div class="modal-header">
                <h2 class="t-modal-title">Wähle deinen Weg</h2>
                <p class="t-modal-subtitle">Was möchtest du entdecken?</p>
            </div>
            <div class="modal-grid">
                <div class="modal-choice choice-sound" onclick="switchModeAndCloseModal('sound')">
                    <i class="fas fa-wave-square" style="color: #9b59b6; font-size: 3rem; margin-bottom: 15px;"></i>
                    <div class="modal-text-wrap">
                        <h2 style="color: #9b59b6;">Eternal Echo</h2>
                        <p class="t-choice-sound-desc">Soundwave Art & Tattoo.</p>
                        <span class="modal-button-fake t-btn-start" style="background: #9b59b6;">Hier starten</span>
                    </div>
                </div>
                <div class="modal-choice choice-astro" onclick="switchModeAndCloseModal('astro')">
                    <i class="fas fa-star" style="color: #c5a059; font-size: 3rem; margin-bottom: 15px;"></i>
                    <div class="modal-text-wrap">
                        <h2 style="color: #c5a059;">Cosmic Bond</h2>
                        <p class="t-choice-astro-desc">Astro & Aura Analyse.</p>
                        <span class="modal-button-fake t-btn-start" style="background: #c5a059;">Hier starten</span>
                    </div>
                </div>
                <div class="modal-choice choice-special" id="special-choice-container">
                    <i class="fas fa-candle-holder" style="color: #C5A059; font-size: 3rem; margin-bottom: 15px;"></i>
                    <div class="modal-text-wrap">
                        <h2 style="color: #C5A059; letter-spacing: 2px;" class="t-special-title">SPECIAL EDITION</h2>
                        <p style="color: #C5A059;" class="t-special-desc">Digital Memorial Raum.</p>
                        <span class="modal-button-fake t-btn-coming" style="border: 1px solid #C5A059; background: transparent; color: #C5A059; opacity: 1;">COMING SOON</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="header-bar" id="header">
        <div class="brand">SOULPAW</div>
        <div class="mode-switch-container">
            <button class="switch-btn active" onclick="switchMode('sound')">SOUND</button>
            <button class="switch-btn" onclick="switchMode('astro')">ASTRO</button>
        </div>
    </div>

    <header class="hero">
        <div class="hero-bg-sound"></div> <div class="hero-bg-astro"></div>
        <div class="hero-content" id="hero-sound">
            <h1>ETERNAL<br><span style="color:var(--accent-color)">ECHO</span></h1>
            <p class="t-hero-sound-desc">Dein Hund. Sein Bellen. Für immer.<br>Wir verwandeln den Klang deiner Fellnase in ein feines, minimalistisches Kunstwerk.</p>
            <a href="#content-sound" class="cta-btn t-btn-how">Wie es funktioniert</a>
        </div>
        <div class="hero-content" id="hero-astro" style="display:none">
            <h1>COSMIC<br><span style="color:var(--accent-color)">BOND</span></h1>
            <p class="t-hero-astro-desc">Steht eure Freundschaft in den Sternen?<br>Unser Algorithmus entschlüsselt die planetare Verbindung.</p>
            <a href="#content-astro" class="cta-btn t-btn-check">Check Compatibility</a>
        </div>
    </header>

    <section id="content-sound" class="content-section active fade-in-section">
        <h2 style="text-align:center;" class="t-section-sound-title">The Sound of Love</h2>
        <p style="text-align:center; opacity:0.7; max-width: 600px; margin: 0 auto 30px auto;" class="t-section-sound-desc">
            Mehr als nur ein Bild. Es ist die visuelle Frequenz der Stimme, die dich jeden Tag begrüßt.
        </p>

        <div style="display: flex; flex-wrap: wrap; gap: 40px; justify-content: center; margin-bottom: 4rem;">
             <ul class="steps-list">
                <li><i class="fas fa-microphone-alt"></i><div><strong class="t-step1-title">1. Aufnahme machen</strong><br><span class="t-step1-desc">Nimm das Bellen einfach mit deinem Handy auf.</span></div></li>
                <li><i class="fas fa-pencil-alt"></i><div><strong class="t-step2-title">2. Wir designen</strong><br><span class="t-step2-desc">Wir zeichnen die Welle von Hand im "Fine Line" Stil.</span></div></li>
                <li><i class="fas fa-heart"></i><div><strong class="t-step3-title">3. Dein Unikat</strong><br><span class="t-step3-desc">Du erhältst die Datei als Tattoo-Vorlage oder Poster.</span></div></li>
            </ul>
        </div>
        
        <div class="showcase">
            <div class="card fade-in-section">
                <div class="visual-sound-container visual-container-common">
                    <div class="default-visual" id="visual-tattoo-default">
                        <i class="fas fa-paw paw-start"></i>
                        <svg class="waveform-svg" viewBox="0 0 100 100" preserveAspectRatio="none">
                            <path class="waveform-path" d="M0,50 L30,50 L35,20 L40,80 L45,10 L50,90 L55,30 L60,70 L65,40 L70,60 L75,50 L80,50 L100,50" />
                        </svg>
                    </div>
                </div>
                <h3>Fine Line Tattoo Template</h3>
                <p class="t-prod-tattoo-desc">Deine hochauflösende Vektordatei. Perfekt für den Tätowierer.</p>
                <br><a href="#order" class="cta-btn t-btn-create" style="font-size:0.8rem; padding:10px 20px;">Vorlage erstellen</a>
            </div>

            <div class="card fade-in-section">
                <div class="visual-sound-container visual-container-common">
                    <img id="img-poster" class="dynamic-img" src="" alt="Poster Design">
                    <div class="default-visual" id="visual-poster-default">
                        <i class="fas fa-qrcode" style="font-size:3rem; color:var(--accent-color); margin-bottom:10px;"></i>
                    </div>
                </div>
                <h3>Interactive Print</h3>
                <p class="t-prod-print-desc">Ein minimalistisches Poster für dein Zuhause. Gedruckt auf dickem, langlebigem, unbeschichtetem Papier in Museumsqualität.</p>
                <br><a href="#order" class="cta-btn t-btn-design" style="font-size:0.8rem; padding:10px 20px;">Poster gestalten</a>
            </div>
        </div>
    </section>

    <section id="content-astro" class="content-section fade-in-section">
        <h2 style="text-align:center;" class="t-section-astro-title">Die Seelen-Formel</h2>
        <p style="text-align:center; opacity:0.7; max-width: 600px; margin: 0 auto;" class="t-section-astro-desc">
            Gib eure Geburtsdaten ein. Optional visualisieren wir auch die Aura deines Hundes.
        </p>
        
        <div class="astro-test">
            <h3><i class="fas fa-moon"></i> <span class="t-astro-check-title">Seelen & Aura Check</span></h3>
            
            <div class="input-wrapper">
                <div class="date-field"><label class="t-label-human">Dein Geburtstag</label><input type="date" id="dateHuman"></div>
                <div class="date-field"><label class="t-label-dog">Geburtstag des Hundes</label><input type="date" id="dateDog"></div>
            </div>

            <div class="aura-toggle-container" onclick="toggleUploadVisibility()">
                <input type="checkbox" id="aura-check" class="aura-checkbox">
                <label for="aura-check" style="cursor:pointer; font-weight:600;" class="t-label-aura">Möchtest du auch die Aura sehen? (Optional)</label>
            </div>

            <div id="upload-wrapper" style="display:none; margin-top: 20px;">
                <div class="photo-upload-box" onclick="document.getElementById('aura-input').click()">
                    <i class="fas fa-camera" style="font-size:1.5rem; color:var(--accent-color);"></i>
                    <span style="margin-left:10px; font-size:0.9rem;" class="t-upload-text">Hier Bild auswählen</span>
                    <input type="file" id="aura-input" accept="image/*" style="display:none" onchange="handleFileSelect(this)">
                </div>
                <p id="file-name-display" style="font-size:0.8rem; opacity:0.7;"></p>
            </div>

            <div id="calc-loader">
                <div class="loader-text" id="loader-text"></div>
                <div class="loader-bar-bg"><div class="loader-bar-fill" id="loader-fill"></div></div>
            </div>

            <button id="calcBtn" class="cta-btn t-btn-analyze" onclick="calculateDeterministicKarma()">Analyse starten</button>

            <div id="karma-result">
                <div class="aura-display" id="aura-result-box">
                    <img id="uploaded-dog-img" src="">
                    <div class="aura-overlay" id="aura-overlay-layer"></div>
                </div>
                <p id="aura-text-desc" style="font-weight:bold; color:var(--accent-color); margin-bottom:20px; display:none;"></p>

                <div id="result-percent" style="font-size:3rem; font-weight:800; color:var(--accent-color); margin-bottom:5px;"></div>
                <p id="result-archetype" style="font-weight:bold; margin-bottom:15px; text-transform:uppercase; letter-spacing:1px;"></p>
                
                <div class="blurred-text">
                    Lorem ipsum dolor sit amet, die Position des Jupiter im fünften Haus deutet auf eine Verbindung hin...
                </div>
                <div class="teaser-box">
                    <p style="font-weight:bold; color:var(--accent-color); margin-bottom:10px;" class="t-teaser-title">⚠️ Detaillierte Analyse erforderlich</p>
                    <p style="font-size:0.9rem;" class="t-teaser-desc">Das ist nur der Anfang. Die vollständige Auswertung erhältst du im Zertifikat.</p>
                    <a href="#order" class="cta-btn t-btn-order-report" style="font-size:0.8rem; padding:10px 20px;">Vollständigen Report bestellen</a>
                </div>
            </div>
        </div>

        <div class="showcase">
            <div class="card fade-in-section" id="astro-product-card" style="max-width: 500px; margin: 0 auto; opacity: 0.6;">
                <div class="visual-container-common visual-astro">
                     <img id="img-karma" class="dynamic-img" src="" alt="Karma Chart">
                     <div class="default-visual" id="visual-karma-default">
                        <i class="fas fa-star star" style="top:20%; left:20%"></i>
                        <svg style="position:absolute; top:0; left:0; width:100%; height:100%; opacity:0.3;"><line x1="20%" y1="20%" x2="50%" y2="50%" stroke="var(--accent-color)" stroke-width="1"/><line x1="50%" y1="50%" x2="70%" y2="80%" stroke="var(--accent-color)" stroke-width="1"/></svg>
                     </div>
                </div>
                <h3>Karma Chart (Print)</h3>
                <p class="t-prod-karma-desc">Deine persönliche Analyse auf 310g Fine Art Papier.</p>
                <br><a href="#order" class="cta-btn t-btn-order-now" style="font-size:0.8rem;">Jetzt bestellen</a>
            </div>
        </div>
    </section>

    <section class="testimonials-section fade-in-section">
        <h2 class="t-testi-title" style="text-align:center; margin-bottom:2rem;">Love Notes</h2>
        
        <div id="reviews-sound" class="marquee-container" style="display:flex;">
            <div class="marquee-track" id="track-sound"></div>
        </div>

        <div id="reviews-astro" class="marquee-container" style="display:none;">
            <div class="marquee-track" id="track-astro"></div>
        </div>
    </section>

    <section class="newsletter-section fade-in-section">
        <h2 class="t-nl-title">Join the VIP Circle</h2>
        <p style="opacity:0.7; margin-bottom:20px;" class="t-nl-desc">Get exclusive access to new drops and soulful insights.</p>
        <div class="newsletter-box">
            <input type="email" placeholder="you@email.com" class="nl-input">
            <button class="nl-btn t-nl-btn">JOIN</button>
        </div>
    </section>

    <section class="faq-section fade-in-section">
        <h2 style="text-align:center; margin-bottom: 2rem;" class="t-faq-title">Häufige Fragen</h2>
        <div id="faq-sound">
            <details><summary class="t-faq-s1-q">Wie mache ich die perfekte Aufnahme?</summary><div class="t-faq-s1-a">...</div></details>
            <details><summary class="t-faq-s2-q">Was ist, wenn mein Hund schon verstorben ist?</summary><div class="t-faq-s2-a">...</div></details>
            <details><summary class="t-faq-s3-q">Wie funktioniert das mit dem QR-Code Poster?</summary><div class="t-faq-s3-a">...</div></details>
        </div>
        <div id="faq-astro">
            <details><summary class="t-faq-a1-q">Ich kenne das Geburtsdatum nicht.</summary><div class="t-faq-a1-a">...</div></details>
            <details><summary class="t-faq-a2-q">Ist die Analyse wirklich "echt"?</summary><div class="t-faq-a2-a">...</div></details>
            <details><summary class="t-faq-a3-q">Was steht im vollständigen "Karma Chart"?</summary><div class="t-faq-a3-a">...</div></details>
        </div>
    </section>

    <section id="order" class="fade-in-section">
        <h2 id="order-title" style="text-align:center; margin-bottom: 0.5rem;">Dein Unikat bestellen</h2>
        <p id="order-desc" style="margin-bottom: 2rem; opacity:0.7; text-align:center;">Wähle dein Produkt direkt in unserem Shop.</p>
        
        <div style="background: white; max-width: 900px; margin: 0 auto; border-radius: 40px; overflow: hidden; box-shadow: 0 20px 60px rgba(0,0,0,0.2); height: 500px; position: relative;">
            <div id="form-container">
                <i id="shop-icon" class="fas fa-store" style="font-size: 4rem; margin-bottom: 20px;"></i>
                <h3 style="font-family: 'Cinzel', serif; font-size: 2rem; margin-bottom: 10px;" class="t-shop-title">Zum SOULPAW Shop</h3>
                <p style="max-width: 400px; margin-bottom: 30px; opacity:0.8;" class="t-shop-desc">Unser Shop öffnet sich in einem neuen Fenster.</p>
                <a href="https://soulpaw.bigcartel.com" target="_blank" class="cta-btn t-btn-open-shop" style="padding: 15px 40px; font-size: 1rem;">Jetzt Shop öffnen <i class="fas fa-external-link-alt" style="margin-left:8px;"></i></a>
            </div>
        </div>
    </section>

    <footer class="fade-in-section">
        <div class="trust-badges"><i class="fas fa-hand-holding-heart"></i> <i class="fas fa-gem"></i> <i class="fas fa-shield-alt"></i></div>
        <p>SOULPAW &copy; 2024. All rights reserved.</p>
        <div class="footer-links" style="margin-top:10px; font-size:0.7rem;"><a href="#">Impressum</a> • <a href="#">Privacy</a></div>
    </footer>

    <script>
        let hasCalculated = false;
        let uploadedImageSrc = null; 

        // --- REVIEWS DATA ---
        const reviewsData = {
            sound: {
                de: [
                    {text: "Ich musste sofort weinen. So schön.", name: "Sarah & Balu"},
                    {text: "Die Linien sind perfekt gestochen.", name: "Mike & Rex"},
                    {text: "Endlich habe ich seine Stimme für immer.", name: "Julia & Sam"},
                    {text: "Unglaubliche Qualität.", name: "Tom & Cooper"},
                    {text: "Das persönlichste Geschenk überhaupt.", name: "Elena & Luna"},
                    {text: "Der QR-Code funktioniert super schnell.", name: "Kevin & Sky"}
                ],
                en: [
                    {text: "I literally cried. So beautiful.", name: "Sarah & Balu"},
                    {text: "Perfect fine lines for my tattoo.", name: "Mike & Rex"},
                    {text: "Finally I have his voice forever.", name: "Julia & Sam"},
                    {text: "Incredible quality.", name: "Tom & Cooper"},
                    {text: "Most personal gift ever.", name: "Elena & Luna"},
                    {text: "QR code works instantly.", name: "Kevin & Sky"}
                ]
            },
            astro: {
                de: [
                    {text: "Die Analyse war unheimlich genau!", name: "Lisa & Nala"},
                    {text: "Wunderschöner Golddruck.", name: "Ben & Rocky"},
                    {text: "Jetzt verstehe ich unsere Verbindung.", name: "Sophie & Max"},
                    {text: "Das Aura-Bild ist magisch.", name: "Nina & Coco"},
                    {text: "Sieht an der Wand fantastisch aus.", name: "Chris & Bella"},
                    {text: "Ein Muss für jede Hundemama.", name: "Laura & Duke"}
                ],
                en: [
                    {text: "The analysis was scary accurate!", name: "Lisa & Nala"},
                    {text: "Beautiful gold print quality.", name: "Ben & Rocky"},
                    {text: "Now I understand our bond.", name: "Sophie & Max"},
                    {text: "The aura picture is magical.", name: "Nina & Coco"},
                    {text: "Looks amazing on my wall.", name: "Chris & Bella"},
                    {text: "A must for every dog mom.", name: "Laura & Duke"}
                ]
            }
        };

        function renderReviews(lang) {
            const trackSound = document.getElementById('track-sound');
            const trackAstro = document.getElementById('track-astro');
            const buildCards = (reviews) => {
                const loop = [...reviews, ...reviews, ...reviews];
                return loop.map(r => `<div class="testi-card"><div class="stars">★★★★★</div><p class="testi-text">"${r.text}"</p><span class="testi-name">- ${r.name}</span></div>`).join('');
            };
            trackSound.innerHTML = buildCards(reviewsData.sound[lang]);
            trackAstro.innerHTML = buildCards(reviewsData.astro[lang]);
        }

        // --- TRANSLATION DICTIONARY ---
        const translations = {
            de: {
                "t-prod-print-desc": "Ein minimalistisches Poster für dein Zuhause. Gedruckt auf dickem, langlebigem, unbeschichtetem Papier in Museumsqualität.",
                "t-modal-title": "Wähle deinen Weg", "t-modal-subtitle": "Was möchtest du entdecken?", "t-choice-sound-desc": "Soundwave Art & Tattoo.", "t-btn-start": "Hier starten", "t-choice-astro-desc": "Astro & Aura Analyse.", "t-special-title": "SPECIAL EDITION", "t-special-desc": "Digital Memorial Raum.", "t-btn-coming": "COMING SOON",
                "t-hero-sound-desc": "Dein Hund. Sein Bellen. Für immer.<br>Wir verwandeln den Klang deiner Fellnase in ein feines, minimalistisches Kunstwerk.", "t-btn-how": "Wie es funktioniert", "t-hero-astro-desc": "Steht eure Freundschaft in den Sternen?<br>Unser Algorithmus entschlüsselt die planetare Verbindung.", "t-btn-check": "Check Compatibility", "t-section-sound-title": "The Sound of Love", "t-section-sound-desc": "Mehr als nur ein Bild. Es ist die visuelle Frequenz der Stimme, die dich jeden Tag begrüßt.", "t-step1-title": "1. Aufnahme machen", "t-step1-desc": "Nimm das Bellen einfach mit deinem Handy auf.", "t-step2-title": "2. Wir designen", "t-step2-desc": "Wir zeichnen die Welle von Hand im \"Fine Line\" Stil.", "t-step3-title": "3. Dein Unikat", "t-step3-desc": "Du erhältst die Datei als Tattoo-Vorlage oder Poster.", "t-prod-tattoo-desc": "Deine hochauflösende Vektordatei. Perfekt für den Tätowierer.", "t-btn-create": "Vorlage erstellen", "t-btn-design": "Poster gestalten", "t-section-astro-title": "Die Seelen-Formel", "t-section-astro-desc": "Gib eure Geburtsdaten ein. Optional visualisieren wir auch die Aura deines Hundes.", "t-astro-check-title": "Seelen & Aura Check", "t-label-human": "Dein Geburtstag", "t-label-dog": "Geburtstag des Hundes", "t-label-aura": "Möchtest du auch die Aura sehen? (Optional)", "t-upload-text": "Hier Bild auswählen", "t-btn-analyze": "Analyse starten", "t-teaser-title": "⚠️ Detaillierte Analyse erforderlich", "t-teaser-desc": "Das ist nur der Anfang. Die vollständige Auswertung erhältst du im Zertifikat.", "t-btn-order-report": "Vollständigen Report bestellen", "t-prod-karma-desc": "Deine persönliche Analyse auf 310g Fine Art Papier.", "t-btn-order-now": "Jetzt bestellen", "t-testi-title": "Love Notes", "t-nl-title": "Join the VIP Circle", "t-nl-desc": "Erhalte exklusiven Zugang zu neuen Drops und seelenvollen Insights.", "t-nl-btn": "BEITRETEN", "t-faq-title": "Häufige Fragen", "t-faq-s1-q": "Wie mache ich die perfekte Aufnahme?", "t-faq-s1-a": "Am besten in einem ruhigen Raum. Halte das Handy-Mikrofon ca. 30cm entfernt und versuche, ein einzelnes, klares \"Wuff\" aufzunehmen. Eine Videoaufnahme funktioniert genauso gut!", "t-faq-s2-q": "Was ist, wenn mein Hund schon verstorben ist?", "t-faq-s2-a": "Das tut uns sehr leid. Oft finden sich die schönsten Aufnahmen in alten Handy-Videos (z.B. vom Spielen oder aus dem Urlaub). Wir können die Tonspur aus jedem Video extrahieren, solange das Bellen zu hören ist.", "t-faq-s3-q": "Wie funktioniert das mit dem QR-Code Poster?", "t-faq-s3-a": "Wir laden deine Audio-Datei sicher hoch und erstellen einen privaten Link. Dieser Link wird in einen QR-Code umgewandelt und dezent auf dein Poster gedruckt. Wenn du ihn mit deiner Handy-Kamera scannst, wird das Bellen sofort abgespielt.", "t-faq-a1-q": "Ich kenne das Geburtsdatum meines Hundes nicht.", "t-faq-a1-a": "Kein Problem! Nimm für den Astro-Check einfach das \"Gotcha-Datum\" – also den Tag, an dem er zu dir gekommen ist. Das ist der Beginn eurer gemeinsamen Reise und astrologisch genauso kraftvoll.", "t-faq-a2-q": "Ist die Analyse wirklich \"echt\"?", "t-faq-a2-a": "Unser \"Seelen-Check\" ist ein liebevoller Algorithmus, der auf echter Numerologie und Sonnenzeichen-Kompatibilität basiert. Er errechnet ein deterministisches (kein zufälliges) Ergebnis. Die vollständige Analyse wird dann von Hand mit diesen Daten erstellt.", "t-faq-a3-q": "Was steht im vollständigen \"Karma Chart\"?", "t-faq-a3-a": "Der vollständige Report (den du bestellst) ist eine wunderschöne PDF- oder Print-Datei. Sie enthält euren Archetypen, eure gemeinsamen Stärken, potenzielle Herausforderungen und eure spirituelle \"Kraft-Farbe\".", "order-title": "Dein Unikat bestellen", "order-desc": "Wähle dein Produkt direkt in unserem Shop.", "t-shop-title": "Zum SOULPAW Shop", "t-shop-desc": "Unser Shop öffnet sich in einem neuen Fenster, um dir die sicherste Bestellung zu garantieren.", "t-btn-open-shop": 'Jetzt Shop öffnen <i class="fas fa-external-link-alt" style="margin-left:8px;"></i>'
            },
            en: {
                "t-prod-print-desc": "A minimalist poster for your home. Printed on thick, durable, uncoated museum-quality paper.",
                "t-modal-title": "Choose Your Path", "t-modal-subtitle": "What would you like to discover?", "t-choice-sound-desc": "Soundwave Art & Tattoo.", "t-btn-start": "Start Here", "t-choice-astro-desc": "Astro & Aura Analysis.", "t-special-title": "SPECIAL EDITION", "t-special-desc": "Digital Memorial Space.", "t-btn-coming": "COMING SOON", "t-hero-sound-desc": "Your dog. Their bark. Forever.<br>We transform the sound of your furry friend into a fine, minimalist work of art.", "t-btn-how": "How it works", "t-hero-astro-desc": "Is your friendship written in the stars?<br>Our algorithm decodes your planetary connection.", "t-btn-check": "Check Compatibility", "t-section-sound-title": "The Sound of Love", "t-section-sound-desc": "More than just a picture. It is the visual frequency of the voice that greets you every day.", "t-step1-title": "1. Make a recording", "t-step1-desc": "Simply record the barking with your mobile phone.", "t-step2-title": "2. We design", "t-step2-desc": "We hand-draw the wave in \"Fine Line\" style.", "t-step3-title": "3. Your unique piece", "t-step3-desc": "You receive the file as a tattoo template or poster.", "t-prod-tattoo-desc": "Your high-resolution vector file. Perfect for the tattoo artist.", "t-btn-create": "Create Template", "t-btn-design": "Design Poster", "t-section-astro-title": "The Soul Formula", "t-section-astro-desc": "Enter your birth dates. Optionally, we can also visualize your dog's aura.", "t-astro-check-title": "Soul & Aura Check", "t-label-human": "Your Birthday", "t-label-dog": "Dog's Birthday", "t-label-aura": "Do you want to see the aura too? (Optional)", "t-upload-text": "Select image here", "t-btn-analyze": "Start Analysis", "t-teaser-title": "⚠️ Detailed analysis required", "t-teaser-desc": "This is just the beginning. You will receive the full evaluation in the certificate.", "t-btn-order-report": "Order Full Report", "t-prod-karma-desc": "Your personal analysis on 310g fine art paper.", "t-btn-order-now": "Order Now", "t-testi-title": "Love Notes", "t-nl-title": "Join the VIP Circle", "t-nl-desc": "Get exclusive access to new drops and soulful insights.", "t-nl-btn": "JOIN", "t-faq-title": "Frequently Asked Questions", "t-faq-s1-q": "How do I make the perfect recording?", "t-faq-s1-a": "Best in a quiet room. Hold the phone microphone about 30cm away and try to record a single, clear \"woof\". A video recording works just as well!", "t-faq-s2-q": "What if my dog has already passed away?", "t-faq-s2-a": "We are very sorry. Often the most beautiful recordings can be found in old mobile phone videos (e.g. from playing or from vacation). We can extract the audio track from any video as long as the barking can be heard.", "t-faq-s3-q": "How does the QR Code Poster work?", "t-faq-s3-a": "We upload your audio file securely and create a private link. This link is converted into a QR code and printed discreetly on your poster. When you scan it with your mobile phone camera, the barking is played immediately.", "t-faq-a1-q": "I don't know my dog's date of birth.", "t-faq-a1-a": "No problem! For the Astro-Check, simply use the \"Gotcha Date\" – the day they came to you. This is the beginning of your journey together and just as powerful astrologically.", "t-faq-a2-q": "Is the analysis really \"real\"?", "t-faq-a2-a": "Our \"Soul Check\" is a loving algorithm based on real numerology and sun sign compatibility. It calculates a deterministic (not random) result. The complete analysis is then created by hand using this data.", "t-faq-a3-q": "What's in the full \"Karma Chart\"?", "t-faq-a3-a": "The full report (which you order) is a beautiful PDF or print file. It contains your archetype, your shared strengths, potential challenges, and your spiritual \"power color\".", "order-title": "Order your unique piece", "order-desc": "Choose your product directly in our shop.", "t-shop-title": "Go to SOULPAW Shop", "t-shop-desc": "Our shop opens in a new window to guarantee you the safest ordering process.", "t-btn-open-shop": 'Open Shop Now <i class="fas fa-external-link-alt" style="margin-left:8px;"></i>'
            }
        };

        function detectAndApplyLanguage() {
            const userLang = navigator.language || navigator.userLanguage;
            const langKey = userLang.startsWith('de') ? 'de' : 'en';
            for (const [key, value] of Object.entries(translations[langKey])) {
                const elements = document.querySelectorAll('.' + key);
                elements.forEach(el => { el.innerHTML = value; });
                const elementById = document.getElementById(key);
                if (elementById) elementById.innerHTML = value;
            }
            renderReviews(langKey);
        }

        document.addEventListener('DOMContentLoaded', () => {
            // 1. Sprache erkennen und anwenden
            detectAndApplyLanguage();

            tryLoadImage('img-poster', 'images/interativesposter.png', 'visual-poster-default');
            tryLoadImage('img-karma', 'images/karmachart.png', 'visual-karma-default');

            const hash = window.location.hash;
            if (hash === '#astro') switchMode('astro');
            else if (hash === '#sound') switchMode('sound');
            else {
                document.getElementById('welcome-modal').style.display = 'flex';
                document.body.classList.add('modal-open');
            }
            
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => { if(entry.isIntersecting) entry.target.classList.add('is-visible'); });
            }, { threshold: 0.1 });
            document.querySelectorAll('.fade-in-section').forEach(section => observer.observe(section));

            const sparkleContainer = document.getElementById('special-choice-container');
            for (let i = 0; i < 40; i++) {
                let sparkle = document.createElement('div');
                sparkle.className = 'realistic-sparkle';
                sparkle.style.top = Math.random() * 100 + '%';
                sparkle.style.left = Math.random() * 100 + '%';
                sparkle.style.animationDelay = Math.random() * 5 + 's';
                sparkle.style.animationDuration = (Math.random() * 2 + 1.5) + 's'; 
                sparkleContainer.appendChild(sparkle);
            }
        });

        function switchModeAndCloseModal(mode) {
            switchMode(mode);
            document.getElementById('welcome-modal').style.display = 'none';
            document.body.classList.remove('modal-open');
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function switchMode(mode) {
            const body = document.body;
            const btns = document.querySelectorAll('.switch-btn');
            const heroSound = document.getElementById('hero-sound');
            const heroAstro = document.getElementById('hero-astro');
            const sectionSound = document.getElementById('content-sound');
            const sectionAstro = document.getElementById('content-astro');
            
            document.getElementById('reviews-sound').style.display = (mode === 'sound') ? 'flex' : 'none';
            document.getElementById('reviews-astro').style.display = (mode === 'astro') ? 'flex' : 'none';
            document.getElementById('faq-sound').style.display = (mode === 'sound') ? 'block' : 'none';
            document.getElementById('faq-astro').style.display = (mode === 'astro') ? 'block' : 'none';

            btns.forEach(b => b.classList.remove('active'));

            if(mode === 'astro') {
                body.classList.add('astro-mode');
                btns[1].classList.add('active');
                heroSound.style.display = 'none'; heroAstro.style.display = 'block';
                sectionSound.classList.remove('active'); sectionAstro.classList.add('active');
                window.location.hash = 'astro';
            } else {
                body.classList.remove('astro-mode');
                btns[0].classList.add('active');
                heroSound.style.display = 'block'; heroAstro.style.display = 'none';
                sectionSound.classList.add('active'); sectionAstro.classList.remove('active');
                window.location.hash = 'sound';
            }
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function toggleUploadVisibility() {
            const chk = document.getElementById('aura-check');
            document.getElementById('upload-wrapper').style.display = chk.checked ? 'block' : 'none';
        }
        function handleFileSelect(input) {
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = function (e) {
                    uploadedImageSrc = e.target.result;
                    const lang = navigator.language.startsWith('de') ? 'de' : 'en';
                    document.getElementById('file-name-display').innerText = (lang === 'de' ? "Bild ausgewählt" : "Image selected");
                };
                reader.readAsDataURL(input.files[0]);
            }
        }
        
        // --- CALCULATION LOGIC ---
        function calculateDeterministicKarma() {
            if(hasCalculated) return;
            const hDate = document.getElementById('dateHuman').value;
            const dDate = document.getElementById('dateDog').value;
            const btn = document.getElementById('calcBtn');
            const output = document.getElementById('tech-output');
            const lang = navigator.language.startsWith('de') ? 'de' : 'en';

            if(!hDate || !dDate) { 
                alert(lang === 'de' ? "Bitte beide Geburtstage eingeben." : "Please enter both birthdays."); 
                return; 
            }
            
            hasCalculated = true;
            btn.disabled = true;
            btn.style.opacity = "0.5";
            btn.innerText = lang === 'de' ? "Analysiere Sterne..." : "Analyzing stars...";
            
            // SHOW LOADING BAR
            document.getElementById('calc-loader').style.display = 'block';
            const fill = document.getElementById('loader-fill');
            const text = document.getElementById('loader-text');
            
            let progress = 0;
            const steps = lang === 'de' ? 
                ["Verbinde mit NASA...", "Berechne Mondknoten...", "Finalisiere Match..."] : 
                ["Connecting to NASA...", "Calculating lunar nodes...", "Finalizing match..."];
            
            const interval = setInterval(() => {
                progress += 1;
                fill.style.width = progress + '%';
                
                if(progress < 30) text.innerText = "> " + steps[0];
                else if(progress < 70) text.innerText = "> " + steps[1];
                else text.innerText = "> " + steps[2];

                if(progress >= 100) {
                    clearInterval(interval);
                    showResults(hDate, dDate);
                }
            }, 45); 
        }

        function showResults(d1, d2) {
            document.getElementById('calcBtn').style.display = 'none';
            document.getElementById('tech-output').style.display = 'none';
            document.getElementById('calc-loader').style.display = 'none';
            
            document.getElementById('karma-result').style.display = 'block';
            if(document.getElementById('aura-check').checked && uploadedImageSrc) {
                document.getElementById('aura-result-box').style.display = 'block';
                document.getElementById('uploaded-dog-img').src = uploadedImageSrc;
                document.getElementById('aura-text-desc').style.display = 'block';
                document.getElementById('aura-text-desc').innerText = "✨ Aura: Mystic Violet";
            }
            document.getElementById('result-percent').innerText = "98% MATCH";
            document.getElementById('result-archetype').innerText = "ARCHETYP: THE PROTECTOR";
            document.getElementById('karma-result').scrollIntoView({behavior: "smooth", block: "center"});
        }
        
        document.addEventListener('mousemove', function(e) {
            if (document.body.classList.contains('astro-mode')) {
                let dust = document.createElement('div');
                dust.className = 'stardust';
                document.body.appendChild(dust);
                dust.style.left = e.pageX + 'px';
                dust.style.top = e.pageY + 'px';
                dust.style.transform = `translate(-50%, -50%) translate(${Math.random()*20-10}px, ${Math.random()*20-10}px)`;
                setTimeout(() => { dust.remove(); }, 800);
            }
        });
        
        function tryLoadImage(id, url, defaultId) {
            const img = new Image();
            img.src = url;
            img.onload = () => { 
                document.getElementById(id).src = url; 
                document.getElementById(id).style.display = 'block'; 
                document.getElementById(defaultId).style.display = 'none'; 
            };
        }
    </script>
</body>
</html>
